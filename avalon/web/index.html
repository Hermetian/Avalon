<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Avalon Control Room</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <main class="page">
      <header class="hero">
        <div>
          <h1>Avalon Control Room</h1>
        </div>
        <div class="status" id="status">
          <div class="status-label">Server</div>
          <div class="status-value" id="serverStatus">Checking…</div>
          <div class="status-label">Phase</div>
          <div class="status-value" id="phaseValue">—</div>
        </div>
      </header>

      <section class="grid">
        <div class="panel">
          <h2>Game Setup</h2>
          <div class="row">
            <label>Player list (JSON)</label>
            <textarea id="playersJson" rows="6">[
  {"id":"p1","name":"You","is_bot":false},
  {"id":"p2","name":"Bot2","is_bot":true},
  {"id":"p3","name":"Bot3","is_bot":true},
  {"id":"p4","name":"Bot4","is_bot":true},
  {"id":"p5","name":"Bot5","is_bot":true},
  {"id":"p6","name":"Bot6","is_bot":true},
  {"id":"p7","name":"Bot7","is_bot":true}
]</textarea>
          </div>
          <div class="row">
            <label>Custom roles (optional JSON array)</label>
            <textarea id="rolesJson" rows="3" placeholder='["Merlin","Percival",...]'></textarea>
          </div>
          <div class="row">
            <label class="toggle">
              <input type="checkbox" id="hammerRule" checked />
              <span>Hammer auto-approve on 5th proposal</span>
            </label>
          </div>
          <div class="actions">
            <button id="createGame">Create Game</button>
            <button id="startGame" class="ghost">Start Game</button>
          </div>
          <p class="hint" id="setupHint"></p>
        </div>

        <div class="panel">
          <h2>Player View</h2>
          <div class="row">
            <label>Private state for player id</label>
            <div class="inline">
              <input id="playerId" value="p1" />
              <button id="loadPrivate" class="ghost">Load</button>
            </div>
          </div>
          <div class="card" id="privateState">No private state loaded.</div>
          <div class="row">
            <label>Chat message</label>
            <div class="inline">
              <input id="chatMessage" placeholder="Say something..." />
              <button id="sendChat">Send</button>
            </div>
          </div>
        </div>

        <div class="panel">
          <h2>Actions</h2>
          <div class="row">
            <label>Propose team (comma-separated ids)</label>
            <div class="inline">
              <input id="teamIds" placeholder="p1,p7" />
              <button id="proposeTeam">Propose</button>
            </div>
          </div>
          <div class="row">
            <label>Vote on team</label>
            <div class="inline">
              <button id="approveTeam">Approve</button>
              <button id="rejectTeam" class="ghost">Reject</button>
            </div>
          </div>
          <div class="row">
            <label>Quest vote</label>
            <div class="inline">
              <button id="questSuccess">Success</button>
              <button id="questFail" class="ghost">Fail</button>
            </div>
          </div>
          <div class="row">
            <label>Assassinate target id</label>
            <div class="inline">
              <input id="assassinTarget" placeholder="p3" />
              <button id="assassinate">Assassinate</button>
            </div>
          </div>
          <p class="hint" id="actionHint"></p>
        </div>

        <div class="panel span">
          <h2>Live State</h2>
          <div class="split">
            <div>
              <h3>Public state</h3>
              <pre id="publicState">Waiting for server…</pre>
            </div>
            <div>
              <h3>Event log</h3>
              <pre id="eventLog">No events yet.</pre>
            </div>
          </div>
        </div>
      </section>
    </main>

    <script src="/static/app.js"></script>
  </body>
</html>
